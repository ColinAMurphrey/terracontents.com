<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Documents</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root {
      --bg: #0e0e11;
      --panel: #16161d;
      --text: #e6e6eb;
      --muted: #9a9aaa;
      --accent: #7aa2f7;
      --border: #262633;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 2rem;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    h1 {
      margin: 0 0 1rem;
      font-weight: 600;
      letter-spacing: .02em;
    }

    .meta {
      color: var(--muted);
      font-size: .9rem;
      margin-bottom: 1.5rem;
    }

    input {
      width: min(520px, 100%);
      padding: .7rem .9rem;
      background: var(--panel);
      border: 1px solid var(--border);
      color: var(--text);
      border-radius: 6px;
      margin-bottom: 1.5rem;
    }

    input::placeholder {
      color: var(--muted);
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      max-width: 720px;
    }

    li {
      margin-bottom: .5rem;
    }

    a {
      display: block;
      padding: .75rem 1rem;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      text-decoration: none;
      transition: background .15s, border .15s, transform .05s;
    }

    a:hover {
      background: #1e1e2a;
      border-color: var(--accent);
      transform: translateY(-1px);
    }

    .empty {
      color: var(--muted);
      margin-top: 1rem;
    }
  </style>
</head>

<body>
  <h1>Documents</h1>
  <div class="meta">Listing HTML files in <code>/documents/</code></div>

  <input id="filter" placeholder="Filter documentsâ€¦" autocomplete="off">

  <ul id="list"></ul>
  <div id="empty" class="empty" style="display:none;">
    No HTML documents found.
  </div>

  <script>
    const listEl = document.getElementById("list");
    const emptyEl = document.getElementById("empty");
    const filterEl = document.getElementById("filter");

    async function loadDocuments() {
      const res = await fetch("./documents/", { cache: "no-store" });
      const html = await res.text();
      const doc = new DOMParser().parseFromString(html, "text/html");

      return Array.from(doc.querySelectorAll("a"))
        .map(a => a.getAttribute("href"))
        .filter(href => href && href.toLowerCase().endsWith(".html"))
        .map(href => "documents/" + href.split("/").pop())
        .filter((v, i, a) => a.indexOf(v) === i)
        .sort((a, b) => a.localeCompare(b, undefined, { numeric: true }));
    }

    function render(files) {
      const q = filterEl.value.toLowerCase();
      const filtered = files.filter(f => f.toLowerCase().includes(q));

      listEl.innerHTML = "";
      for (const file of filtered) {
        const name = decodeURIComponent(file.split("/").pop());
        const li = document.createElement("li");
        li.innerHTML = `<a href="${file}">${name}</a>`;
        listEl.appendChild(li);
      }

      emptyEl.style.display = filtered.length ? "none" : "block";
    }

    (async () => {
      try {
        const files = await loadDocuments();
        render(files);
        filterEl.addEventListener("input", () => render(files));
      } catch {
        emptyEl.style.display = "block";
        emptyEl.textContent =
          "Could not read /documents/. Make sure you are using a local web server.";
      }
    })();
  </script>
</body>
</html>
